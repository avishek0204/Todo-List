<% provide(:title, "List of all users")%>

<% if @all_users.first != nil %>

  <table class="table todos_table">
    <h1 class="table-heading"> List of all Users</h1>
    <thead>
      <tr>
        <th scope="col">Serial</th>
        <th scope="col">Name</th>
        <th scope="col">Email</th>
        <th scope="col">No of todos </th>
      </tr>
    </thead>
    <tbody>
      
      <% @all_users.each do |user|%>
          <%
              no_of_todos = Todo.where(user_id: user[:id]).length
          %>
          <tr>
              <th scope="row"><%= user.id %></th>
              <td scope="row"><%= user[:username] %></td>
              <td class="todo_desc"><%= user[:email] %></td>
              <td scope="row"><%= no_of_todos %></td>
              
          </tr>
      <% end %>
      
    </tbody>
  </table>
<% end %>